<html>
<head>
    <title>Register User</title>
    <script src="../JavaScript/jquery-3.0.0.min.js" type="text/javascript"></script>
</head>
<body>
<div>
	<input type="text" name="username" id="usernameInput" placeholder="Username">
	<input type="email" name="email" id="emailInput" placeholder="Email">
	<input type="password" name="password" id="passwordInput" placeholder="Password">
	<button type="submit" id="submit_form">Submit</button>
</div>

<script type="text/javascript">

    $("#submit_form").click(function() {
      alert("Submitting registration form to API Gateway");
      post_request();
    });

    function post_request() {

        var params = JSON.stringify({
            request: "registerUser",
            token: "1",
            user:{ 
            	username: document.getElementById("usernameInput").value, 
                email: document.getElementById("emailInput").value, 
                password: document.getElementById("passwordInput").value
            }
        });

        $.ajax( {
            type: "POST",
            url: "$(API_URL)",
            headers: { 'Access-Control-Allow-Origin': document.domain },
            data: params,
            contentType: "application/json",
            dataType: "json",
            jsonp: false,
            xhrFields: {
                withCredentials: true
            },
            success: function() {
                alert("Success!");
            },
            error: function(xhr, status, error) {
                var err = eval("(" + xhr.responseText + ")");
  				alert(err.Message);
            }
        })
    }

</script>
</body>
</html>
